<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Lux Marketing Studio</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    a[href*="instagram.com"]:hover {
      transform: scale(1.05);
      transition: transform 0.3s ease;
      box-shadow: 0 0 10px rgba(255, 255, 255, 0.3);
    }
    h1 {
      font-size: 100px;
      margin: 0;
      font-weight: bold;
      letter-spacing: 2px;
      color: white;
      transition: color 3s ease;
    }
    h1:hover {
      color: #39ff14;
    }
    .zoom-on-hover {
      display: inline-block;
      transition: transform 0.3s ease;
    }
    .zoom-on-hover:hover {
      transform: scale(1.1);
    }
    .hover-eyes {
      color: white;
      transition: color 3s ease;
    }
    .hover-eyes:hover {
      color: black;
    }
    .gallery-item {
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      border: 2px solid transparent;
      cursor: pointer;
    }
    .gallery-item:hover {
      transform: scale(1.05);
    }
    .gallery-item.dragElem {
      opacity: 0.5;
      transform: scale(1.1);
      box-shadow: 0 0 15px rgba(255, 255, 255, 0.5);
      border: 2px dashed #39ff14;
    }
    .gallery-item.drag-over {
      border: 2px dashed #39ff14;
    }
    .filter-btn {
      background: white;
      color: black;
      padding: 10px 20px;
      border-radius: 30px;
      border: none;
      font-weight: bold;
      font-size: 14px;
      cursor: pointer;
      transition: transform 0.3s ease;
    }
    .filter-btn:hover {
      transform: scale(1.05);
      box-shadow: 0 0 10px rgba(255, 255, 255, 0.3);
    }
    @keyframes blinkRed {
      0% { opacity: 1; }
      50% { opacity: 0; }
      100% { opacity: 1; }
    }
    @keyframes blinkGreen {
      0% { opacity: 1; }
      25% { opacity: 0; }
      50% { opacity: 1; }
      75% { opacity: 0; }
      100% { opacity: 1; }
    }
  </style>
</head>
<body>
  <!-- existing HTML layout omitted for brevity -->
  <script>
    const galleryGrid = document.getElementById('gallery-grid');
    let dragSrcEl = null;

    function handleDragStart(e) {
      dragSrcEl = this;
      e.dataTransfer.effectAllowed = 'move';
      e.dataTransfer.setData('text/html', this.outerHTML);
      this.classList.add('dragElem');
    }

    function handleDragOver(e) {
      if (e.preventDefault) e.preventDefault();
      this.classList.add('drag-over');
      return false;
    }

    function handleDrop(e) {
      if (e.stopPropagation) e.stopPropagation();
      if (dragSrcEl !== this) {
        this.insertAdjacentHTML('beforebegin', e.dataTransfer.getData('text/html'));
        this.parentNode.removeChild(dragSrcEl);
        addDnDHandlers();
        saveGalleryOrder();
      }
      return false;
    }

    function handleDragEnd() {
      this.classList.remove('dragElem');
      document.querySelectorAll('.gallery-item').forEach(el => el.classList.remove('drag-over'));
    }

    function addDnDHandlers() {
      const items = galleryGrid.querySelectorAll('.gallery-item');
      items.forEach(item => {
        item.setAttribute('draggable', 'true');
        item.addEventListener('dragstart', handleDragStart);
        item.addEventListener('dragover', handleDragOver);
        item.addEventListener('drop', handleDrop);
        item.addEventListener('dragend', handleDragEnd);
      });
    }

    function saveGalleryOrder() {
      const order = Array.from(galleryGrid.children).map(img => img.src);
      localStorage.setItem('galleryOrder', JSON.stringify({ order, timestamp: Date.now() }));
      localStorage.setItem('galleryLock', Date.now());
    }

    function loadGalleryOrder() {
      const saved = JSON.parse(localStorage.getItem('galleryOrder'));
      if (saved && Date.now() - saved.timestamp < 60000) {
        const orderedImages = saved.order.map(src => {
          const img = Array.from(document.querySelectorAll('.gallery-item')).find(i => i.src === src);
          return img ? img.cloneNode(true) : null;
        }).filter(Boolean);
        galleryGrid.innerHTML = '';
        orderedImages.forEach(img => galleryGrid.appendChild(img));
      }
      addDnDHandlers();
    }

    function updateCountdown() {
      const timer = document.getElementById('timer');
      const lock = localStorage.getItem('galleryLock');
      if (!lock) return;
      const remaining = 60000 - (Date.now() - parseInt(lock, 10));
      if (remaining > 0) {
        const sec = Math.floor(remaining / 1000);
        const ms = Math.floor((remaining % 1000) / 10);
        timer.textContent = `${sec.toString().padStart(2, '0')}:${ms.toString().padStart(2, '0')}`;
        if (remaining < 10000) {
          timer.style.color = '#39ff14';
          timer.style.animation = 'blinkGreen 0.5s infinite';
        } else {
          timer.style.color = 'red';
          timer.style.animation = 'blinkRed 1s infinite';
        }
      } else {
        timer.textContent = '60:00';
        timer.style.animation = 'none';
        timer.style.color = 'white';
      }
    }

    setInterval(updateCountdown, 100);
    loadGalleryOrder();
  </script>
</body>
</html>
